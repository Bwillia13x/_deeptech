apiVersion: v1
kind: ConfigMap
metadata:
  name: signal-harvester-config
  namespace: signal-harvester
  labels:
    app.kubernetes.io/name: signal-harvester
    app.kubernetes.io/component: config
data:
  # Application configuration
  LOG_LEVEL: "INFO"
  ENVIRONMENT: "production"

  # Database configuration
  DB_PATH: "/data/signal_harvester.db"
  DB_POOL_SIZE: "20"
  DB_MAX_OVERFLOW: "10"
  DB_POOL_TIMEOUT: "30"

  # Redis configuration
  REDIS_HOST: "redis-service"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_MAX_CONNECTIONS: "50"

  # API configuration
  API_HOST: "0.0.0.0"
  API_PORT: "8000"
  API_WORKERS: "4"
  CORS_ORIGINS: '["https://signal-harvester.example.com"]'

  # Rate limiting
  RATE_LIMIT_ENABLED: "true"
  RATE_LIMIT_PER_MINUTE: "60"

  # Discovery pipeline configuration
  DISCOVERY_ENABLED: "true"
  DISCOVERY_INTERVAL_HOURS: "24"
  MAX_ARTIFACTS_PER_SOURCE: "100"

  # Embedding cache configuration
  EMBEDDING_CACHE_TTL_DAYS: "7"
  EMBEDDING_BATCH_SIZE: "32"
  EMBEDDING_MODEL: "sentence-transformers/all-MiniLM-L6-v2"

  # Topic evolution configuration
  TOPIC_SIMILARITY_THRESHOLD: "0.85"
  TOPIC_DIVERSITY_THRESHOLD: "0.70"
  TOPIC_MIN_ARTIFACTS: "3"

  # Relationship detection configuration
  SEMANTIC_SIMILARITY_THRESHOLD: "0.80"
  CITATION_GRAPH_MAX_DEPTH: "3"

  # Source configuration
  ARXIV_ENABLED: "true"
  GITHUB_ENABLED: "true"
  X_ENABLED: "true"
  FACEBOOK_ENABLED: "false"
  LINKEDIN_ENABLED: "false"

  # Performance tuning
  WORKER_TIMEOUT: "300"
  GRACEFUL_TIMEOUT: "30"
  KEEPALIVE: "5"
  MAX_REQUESTS: "1000"
  MAX_REQUESTS_JITTER: "100"
